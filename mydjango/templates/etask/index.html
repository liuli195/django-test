{% extends "home/navbar-top.html" %}

{% block nav-list-name %}
  {% if latest_task_list %}
    <li {% ifequal activeid 0 %}class="active"{% endifequal %}>
      <a href="/etask/">
  	    全部任务
  	  </a>
    </li>
    {% for task_list in latest_task_list %}
      <li {% ifequal activeid task_list.id %}class="active"{% endifequal %}>
      	<a href="/etask/{{ task_list.id }}/">
  	      {{ task_list.list_name }}
  	    </a>
      </li>
    {% endfor %}
  {% endif %}
{% endblock %}

{% block btngroup %}
  			<span id="btn-hide" style="display: none;">
  			{% if button_data %}
  			{% for button in button_data %} 
  			{% ifequal button.3 'none' %}		
  			  {% ifequal button.4 'show' %}
  			  {% ifnotequal button.1 'add_task' %}
  			<button name={{ button.1 }} class="btn mybutton" >{{ button.2 }}</button>
  			 {% endifnotequal %}
  			  {% endifequal %}
  			{% endifequal %}
  			{% ifequal button.3 'dropdown' %}
  			 {% ifequal button.4 'show' %}
  			 {% ifnotequal button.1 'add_task' %}	
  			<div class="btn-group">
  			<button class="btn dropdown-toggle mybutton" data-toggle="dropdown" />
  			{{ button.2 }}
  			<span class="caret"></span></button>
  				<ul class="dropdown-menu">
  				<input id="submib_value"  type="hidden">
  				{% for menu in button.5 %}
    			<li><a href="#" name={{ button.1 }} value={{ menu.id }}>{{ menu.list_name }}</a></li>
    			{% endfor %}
  				</ul>
  			</div>
  			{% endifnotequal %}
  			{% endifequal %}
  			{% endifequal %}
  			{% endfor %}
  			{% endif %}  			
  			</span>
{% endblock %}

{% block incontent %}
<table class="table table-hover table-condensed">
              <tbody id="selected-light">
              	{% for task in data.all_task %}
                <tr id={{ task.id }}>
                  <td><input type="checkbox" id={{ task.id }} name="chioce-{{ task.id }}" value="{{ task.id }}" /></td>
                  
                  {% ifequal task.priority 1 %}
                  <td><span class="badge badge-success">{{ task.priority }}</span></td>
                  {% endifequal %}                
                  {% ifequal task.priority 2 %}
                  <td><span class="badge badge-warning">{{ task.priority }}</span></td>
                  {% endifequal %}
                  {% ifequal task.priority 3 %}
                  <td><span class="badge badge-important">{{ task.priority }}</span></td>
                  {% endifequal %}
                  
                  {% ifequal activeid 0 %}
                  <td><span class="label">{{ task.task_list }}</span></td>
                  {% endifequal %}
                  <td>{{ task.task_text }}</td>
                  <td>{{ task.pub_date }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
{% endblock %}


{% block add_task_modal %}
<!-- Modal -->
{% for button in button_data %}
{% ifequal button.1 'add_task' %}
<div class="modal hide fade" id="add_task_modal" aria-hidden="true" role="dialog">
  <div class="modal-header">
    <a class="close" data-dismiss="modal" aria-hidden="true">×</a>
    <h3>{{ button.2 }}</h3>
  </div>
  <div class="modal-body modal_body_pad">
    <div class="controls">
    <input type="text" class="span5" placeholder="请输入任务...">
    </div>
    <div class="form-inline controls controls-row">
        <label>列表：</label>
		<input type="text" class="input-small" value="收集箱" data-provide="typeahead" data-items="4" data-source="{{ add_form_tasklist }}">
		<label class="mymargin">优先级：</label>
    	<input type="text" class="input-small" value="1">
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
    <button name={{ button.1 }} class="btn btn-primary">保存任务</button>
  </div>
</div>
{% endifequal %}
{% endfor %}
{% endblock %}